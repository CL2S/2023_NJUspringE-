{"remainingRequest":"E:\\2023春季课程\\大实验\\ElementVueSpringbootCodeTemplate-master\\WebProject\\node_modules\\babel-loader\\lib\\index.js!E:\\2023春季课程\\大实验\\ElementVueSpringbootCodeTemplate-master\\WebProject\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\2023春季课程\\大实验\\ElementVueSpringbootCodeTemplate-master\\WebProject\\src\\libs\\util.js","dependencies":[{"path":"E:\\2023春季课程\\大实验\\ElementVueSpringbootCodeTemplate-master\\WebProject\\src\\libs\\util.js","mtime":1547344386000},{"path":"E:\\2023春季课程\\大实验\\ElementVueSpringbootCodeTemplate-master\\WebProject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680832646317},{"path":"E:\\2023春季课程\\大实验\\ElementVueSpringbootCodeTemplate-master\\WebProject\\node_modules\\babel-loader\\lib\\index.js","mtime":1680832646746},{"path":"E:\\2023春季课程\\大实验\\ElementVueSpringbootCodeTemplate-master\\WebProject\\node_modules\\eslint-loader\\index.js","mtime":1680832645561}],"contextDependencies":[],"result":["import axios from 'axios';\nimport env from '../config/env';\nimport Vue from 'vue';\nimport param from './param';\nvar util = {};\n\nutil.title = function (title) {\n  title = title ? title + ' - Home' : '晓风轻 Element Vue Springboot 代码模板';\n  window.document.title = title;\n};\n\nvar ajaxUrl = env === 'development' ? 'http://localhost:8080' : env === 'production' ? 'springboot' : 'springboot';\nvar axiosInstance = axios.create({\n  baseURL: ajaxUrl,\n  timeout: 30000,\n  withCredentials: true\n});\n/*\n * 返回Response的data（即json数据）\n */\n\nfunction handlerData(response) {\n  // 全局的没有登录异常单独处理\n  //if (response.data.code === -1) {\n  //    console.log('no login');\n  // 还没有找到中断promise好的办法\n  //}\n  console.log(response.data);\n  return response.data;\n} //添加一个返回拦截器\n\n\naxiosInstance.interceptors.response.use(function (response) {\n  var data = response.data;\n  console.log('axiosInstance.interceptors', data);\n  console.log('axiosInstance.interceptors', data.code); //对返回的数据进行一些处理\n  // 全局的没有登录异常单独处理\n\n  if (response.status == 401 || data.code === -1) {\n    console.log('no login'); // 通知打开登录窗口\n\n    Vue.bus.emit('login-open'); // 还没有找到中断promise好的办法\n\n    return Promise.reject('ERROR_NOLOGIN');\n  }\n\n  return response;\n}, function (error) {\n  var response = error.response;\n  console.log(\"response\", error);\n\n  for (var i in error) {\n    console.log(i, error[i]);\n  }\n\n  if (response) {\n    // 全局的没有登录异常单独处理\n    if (response.status == 401 || response.data.code === -1) {\n      console.log('no login'); // 通知打开登录窗口\n\n      Vue.bus.emit('login-open'); // 还没有找到中断promise好的办法\n\n      return Promise.reject('ERROR_NOLOGIN');\n    }\n  } //对返回的错误进行一些处理\n\n\n  return Promise.reject(error);\n});\nutil.ajax = {};\n\nutil.ajax.post = function () {\n  return axiosInstance.post.apply(this, arguments).then(handlerData);\n};\n\nutil.ajax.postForm = function (url, data) {\n  return axiosInstance.post(url, data, {\n    transformRequest: [param],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  }).then(handlerData);\n};\n\nutil.ajax.get = function () {\n  return axiosInstance.get.apply(this, arguments).then(handlerData);\n};\n/**\n * 对象是否包含指定关键字 key\n */\n\n\nutil.isMatch = function (e, key) {\n  var props = ['name', 'value', 'description'];\n\n  for (var i in props) {\n    var field = e[props[i]];\n\n    if (field && field.indexOf(key) > -1) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nexport default util;",{"version":3,"sources":["src\\libs\\util.js"],"names":["axios","env","Vue","param","util","title","window","document","ajaxUrl","axiosInstance","create","baseURL","timeout","withCredentials","handlerData","response","console","log","data","interceptors","use","code","status","bus","emit","Promise","reject","error","i","ajax","post","apply","arguments","then","postForm","url","transformRequest","headers","get","isMatch","e","key","props","field","indexOf"],"mappings":"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","sourceRoot":"E:\\2023春季课程\\大实验\\ElementVueSpringbootCodeTemplate-master\\WebProject","sourcesContent":["import axios from 'axios';\nimport env from '../config/env';\nimport Vue from 'vue';\nimport param from './param'\n\nlet util = {\n\n};\n\nutil.title = function (title) {\n    title = title ? title + ' - Home' : '晓风轻 Element Vue Springboot 代码模板';\n    window.document.title = title;\n};\n\nconst ajaxUrl = env === 'development' ?\n    'http://localhost:8080' :\n    env === 'production' ?\n        'springboot' :\n        'springboot';\n\nlet axiosInstance = axios.create({\n    baseURL: ajaxUrl,\n    timeout: 30000,\n    withCredentials: true\n});\n\n/*\n * 返回Response的data（即json数据）\n */\nfunction handlerData(response) {\n    // 全局的没有登录异常单独处理\n    //if (response.data.code === -1) {\n    //    console.log('no login');\n    // 还没有找到中断promise好的办法\n    //}\n\n    console.log(response.data);\n\n    return response.data;\n}\n\n//添加一个返回拦截器\naxiosInstance.interceptors.response.use(function (response) {\n    let data = response.data\n\n    console.log('axiosInstance.interceptors', data);\n    console.log('axiosInstance.interceptors', data.code);\n\n    //对返回的数据进行一些处理\n    // 全局的没有登录异常单独处理\n    if (response.status == 401 || data.code === -1) {\n        console.log('no login');\n\n        // 通知打开登录窗口\n        Vue.bus.emit('login-open');\n\n        // 还没有找到中断promise好的办法\n        return Promise.reject('ERROR_NOLOGIN');\n    }\n\n    return response;\n}, function (error) {\n    let response = error.response;\n\n    console.log(\"response\", error);\n\n    for(var i in error){\n        console.log(i, error[i]);\n    }\n    \n    if(response){\n        // 全局的没有登录异常单独处理\n        if (response.status == 401 || response.data.code === -1) {\n            console.log('no login');\n            \n            // 通知打开登录窗口\n            Vue.bus.emit('login-open');\n            \n            // 还没有找到中断promise好的办法\n            return Promise.reject('ERROR_NOLOGIN');\n        }\n    }\n\n    //对返回的错误进行一些处理\n    return Promise.reject(error);\n});\n\nutil.ajax = {};\n\nutil.ajax.post = function () {\n    return axiosInstance.post.apply(this, arguments).then(handlerData)\n}\n\nutil.ajax.postForm = function (url, data) {\n    return axiosInstance.post(url, data, {\n        transformRequest: [param],\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n        }\n    }).then(handlerData)\n}\n\nutil.ajax.get = function () {\n    return axiosInstance.get.apply(this, arguments).then(handlerData);\n}\n\n/**\n * 对象是否包含指定关键字 key\n */\nutil.isMatch = function(e, key){\n    var props = ['name', 'value', 'description'];\n\n    for(var i in props){\n        var field = e[props[i]];\n\n        if(field && field.indexOf(key) > -1){\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport default util;"]}]}